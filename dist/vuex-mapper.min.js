/**
 * vuex-mapper v1.0.0-alpha.0
 * (c) 2018 Ben Delsol <ben.t.delsol@gmail.com>
 * @license MIT
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VuexMapper=t()}(this,function(){"use strict";function R(e){return Object.defineProperty(e.data(),"id",{value:e.id})}var a=function(e){return e&&"object"==typeof e},s=function(e){return e.toDate},u=function(e){return e&&e.onSnapshot};function p(r,i,o,e){void 0===o&&(o=""),void 0===e&&(e=[{},{}]),i=i||{};var t=Object.getOwnPropertyDescriptor(r,"id");return t&&!t.enumerable&&Object.defineProperty(e[0],"id",t),Object.keys(r).reduce(function(e,t){var n=r[t];return u(n)?(e[0][t]=i[t]||n.path,e[1][o+t]=n):Array.isArray(n)?(e[0][t]=Array(n.length).fill(null),p(n,i[t],o+t+".",[e[0][t],e[1]])):null==n||n instanceof Date||s(n)||n.longitude&&n.latitude?e[0][t]=n:a(n)?(e[0][t]={},p(n,i[t],o+t+".",[e[0][t],e[1]])):e[0][t]=n,e},e)}function v(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}var e,j="vuexfire/SET_VALUE",$="vuexfire/ARRAY_ADD",g="vuexfire/ARRAY_REMOVE",r=((e={})[j]=function(e,t){var n,r,i,o,a,s=t.path,u=t.target,c=t.data;n=u,r=c,i=(""+s).split("."),o=i.pop(),a=i.reduce(function(e,t){return e[t]},n),isFinite(o)?a.splice(o,1,r):a[o]=r},e[$]=function(e,t){var n=t.newIndex,r=t.data;t.target.splice(n,0,r)},e[g]=function(e,t){var n=t.oldIndex;return t.target.splice(n,1)[0]},e),t={},O={root:!0};function k(e){for(var t in e)e[t].unsub()}function b(e,h){var p=e.subs,v=e.refs,$=e.target,g=e.path,b=(e.data,e.depth),x=e.commit,y=e.resolve,t=Object.keys(v);if(Object.keys(p).filter(function(e){return t.indexOf(e)<0}).forEach(function(e){p[e].unsub(),delete p[e]}),!t.length||++b>h.maxRefDepth)return y(g);var _=0,M=t.length,w=Object.create(null);t.forEach(function(e){var t,n,r,i,o,a,s,u,c,d,l=p[e],f=v[e],m=g+"."+e;if(w[m]=!0,l){if(l.path===f.path)return;l.unsub()}p[e]={unsub:(t={ref:f,target:$,path:m,depth:b,commit:x,resolve:function(e){e in w&&++_>=M&&y(g)}.bind(null,m)},n=h,r=t.ref,i=t.target,o=t.path,a=t.depth,s=t.commit,u=t.resolve,c=Object.create(null),d=r.onSnapshot(function(e){e.exists?C({snapshot:R(e),target:i,path:o,subs:c,depth:a,commit:s,resolve:u},n):(s(j,{target:i,path:o,data:null},O),u(o))}),function(){d(),k(c)}),path:f.path}})}function C(e,t){var n=e.snapshot,r=e.target,i=e.path,o=e.subs,a=e.depth;void 0===a&&(a=0);var s=e.commit,u=e.resolve,c=p(n,v(r,i)),d=c[0],l=c[1];s(j,{path:i,target:r,data:d},O),b({data:d,subs:o,refs:l,target:r,path:i,depth:a,commit:s,resolve:u},t)}Object.keys(r).forEach(function(n){t[n]=function(e,t){r[n](t.state,t)}});var c=new WeakMap;function o(e,n){var r=e.state,i=e.commit,o=e.key,a=e.ref;void 0===n&&(n={maxRefDepth:2});var s=c.get(i);return s||(s=Object.create(null),c.set(i,s)),o in s&&d({commit:i,key:o}),new Promise(function(e,t){s[o]=a.where?function(e,c){var o=e.vm,a=e.key,t=e.collection,d=e.commit,l=e.resolve,n=e.reject;d(j,{path:a,target:o,data:[]},O);var s,f=v(o,a),u=l,m=[],h={added:function(e){var t=e.newIndex,n=e.doc;m.splice(t,0,Object.create(null));var r=m[t],i=p(R(n)),o=i[0],a=i[1];d($,{target:f,newIndex:t,data:o},O),b({data:o,refs:a,subs:r,target:f,path:t,depth:0,commit:d,resolve:l.bind(null,n)},c)},modified:function(e){var t=e.oldIndex,n=e.newIndex,r=e.doc,i=m.splice(t,1)[0];m.splice(n,0,i);var o=d(g,{target:f,oldIndex:t},O),a=p(R(r),o),s=a[0],u=a[1];d($,{target:f,newIndex:n,data:s},O),b({data:s,refs:u,subs:i,target:f,path:n,depth:0,commit:d,resolve:l},c)},removed:function(e){var t=e.oldIndex;d(g,{target:f,oldIndex:t},O),k(m.splice(t,1)[0])}},r=t.onSnapshot(function(e){var t="function"==typeof e.docChanges?e.docChanges():e.docChanges;if(!s&&t.length){s=!0;var n=0,r=t.length,i=t.reduce(function(e,t){return e[t.doc.id]=!1,e},Object.create(null));l=function(e){e.id in i&&++n>=r&&(u(o[a]),l=function(e){})}}t.forEach(function(e){h[e.type](e)}),t.length||l()},n);return function(){r(),m.forEach(k)}}({vm:r,key:o,collection:a,commit:i,resolve:e,reject:t},n):function(e,t){var n,r,i,o=e.vm,a=e.key,s=e.document,u=e.commit,c=e.resolve,d=e.reject,l=Object.create(null);n=c,r=function(){return o[a]},c=function(){if(!i)return i=!0,n(r())};var f=s.onSnapshot(function(e){e.exists?C({snapshot:R(e),target:o,path:a,subs:l,commit:u,resolve:c},t):c()},d);return function(){f(),k(l)}}({vm:r,key:o,document:a,commit:i,resolve:e,reject:t},n)})}function d(e){var t=e.commit,n=e.key,r=c.get(t);r&&(r[n](),delete r[n])}function i(n){return function(e,t){var r=e.state,i=e.commit;return e.bindFirebaseRef=function(e,t,n){return void 0===n&&(n={}),o({state:r,commit:i,key:e,ref:t},n)},e.unbindFirebaseRef=function(e){return d({commit:i,key:e})},n(e,t)}}var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var l,x=(function(e,t){var n;n=function(){var n=[],r=[],o={},i={},a={};function s(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function u(e,t){return e===t?t:e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function c(o,a){return o.replace(a[0],function(e,t){var n,r,i=(n=a[1],r=arguments,n.replace(/\$(\d{1,2})/g,function(e,t){return r[t]||""}));return u(""===e?o[t-1]:e,i)})}function d(e,t,n){if(!e.length||o.hasOwnProperty(e))return t;for(var r=n.length;r--;){var i=n[r];if(i[0].test(t))return c(t,i)}return t}function e(n,r,i){return function(e){var t=e.toLowerCase();return r.hasOwnProperty(t)?u(e,t):n.hasOwnProperty(t)?u(e,n[t]):d(t,e,i)}}function t(n,r,i,e){return function(e){var t=e.toLowerCase();return!!r.hasOwnProperty(t)||!n.hasOwnProperty(t)&&d(t,t,i)===t}}function l(e,t,n){return(n?t+" ":"")+(1===t?l.singular(e):l.plural(e))}return l.plural=e(a,i,n),l.isPlural=t(a,i,n),l.singular=e(i,a,r),l.isSingular=t(i,a,r),l.addPluralRule=function(e,t){n.push([s(e),t])},l.addSingularRule=function(e,t){r.push([s(e),t])},l.addUncountableRule=function(e){"string"!=typeof e?(l.addPluralRule(e,"$0"),l.addSingularRule(e,"$0")):o[e.toLowerCase()]=!0},l.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),a[e]=t,i[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(e){return l.addIrregularRule(e[0],e[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(e){return l.addPluralRule(e[0],e[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(e){return l.addSingularRule(e[0],e[1])}),["adulthood","advice","agenda","aid","alcohol","ammo","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","manga","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","tennis","traffic","transporation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(l.addUncountableRule),l},e.exports=n()}(l={exports:{}},l.exports),l.exports),f="\\ud800-\\udfff",m="\\u2700-\\u27bf",h="a-z\\xdf-\\xf6\\xf8-\\xff",y="A-Z\\xc0-\\xd6\\xd8-\\xde",_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",M="["+_+"]",w="\\d+",I="["+m+"]",A="["+h+"]",N="[^"+f+_+w+m+h+y+"]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",P="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+y+"]",E="(?:"+A+"|"+N+")",L="(?:"+S+"|"+N+")",q="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",z="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",K="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",U="[\\ufe0e\\ufe0f]?",F=U+K+("(?:\\u200d(?:"+["[^"+f+"]",D,P].join("|")+")"+U+K+")*"),T="(?:"+[I,D,P].join("|")+")"+F,W=(RegExp([S+"?"+A+"+"+q+"(?="+[M,S,"$"].join("|")+")",L+"+"+z+"(?="+[M,S+E,"$"].join("|")+")",S+"?"+E+"+"+q,S+"+"+z,w,T].join("|"),"g"),"object"==typeof n&&n&&n.Object===Object&&n),V="object"==typeof self&&self&&self.Object===Object&&self,Z=(W||V||Function("return this")()).Symbol,B=Z?Z.prototype:void 0,Y=(B&&B.toString,{}),G=function(e,t){return e.where("authorId","==",t.rootState.user.uid).orderBy("createdAt","asc")},H={},J={},Q=function(e,t){var n=t.currentTime;this.parentRequire=e,this.currentTime=n,this.modelRegistration={}};return Q.prototype.lookupModel=function(e){var t=x.singular(e);return this.modelRegistration[t]},Q.prototype.registerModel=function(e,t){var n=x.singular(e);this.modelRegistration[n]=t},Q.prototype.vuexModule=function(e){var t=e.name,n=e.joinsWith,s=t,u=(n||[]).map(function(e){return[s,e].sort().join("_")}),a=this.currentTime;return{namespaced:!0,modules:{},state:function(){var e={refKey:""};return e[s]=[],e},getters:{},mutations:{setRef:function(e,t){var n=t.ref,r=t.parentDocId;e.refKey=r?s+"-"+r:s,Y[e.refKey]=n}},actions:{setRef:i(function(e,t){var n=t.ref,r=t.parentDocId;if(Y[e.state.refKey]&&n.isEqual(Y[e.state.refKey]))return Promise.resolve();e.commit("setRef",{ref:n,parentDocId:r});var i=G(Y[e.state.refKey],e);return e.bindFirebaseRef(s,i)}),unsetRef:i(function(e){var t=e.state;(0,e.unbindFirebaseRef)(s),delete Y[t.refKey]}),addWithId:function(e,t){var n=e.state,r=e.rootState,i=e.dispatch;void 0===t&&(t={});var o=Y[n.refKey].doc(t.id);return delete t.id,i("saveTransaction",o.set(Object.assign({},t,{authorId:r.user.uid,createdAt:a()})),{root:!0})},add:function(e,t){var n=e.state,r=e.rootState;return void 0===t&&(t={}),(0,e.dispatch)("saveTransaction",Y[n.refKey].add(Object.assign({},t,{authorId:r.user.uid,createdAt:a()})),{root:!0})},update:function(e,t){var n=e.state,r=e.dispatch,i=t.id,o=Object.assign({},t);return delete o.id,r("saveTransaction",Y[n.refKey].doc(i).update(o),{root:!0})},get:function(t){return G(Y[t.state.refKey],t).get().then(function(e){return e.docs.map(function(e){return Y[t.state.refKey].doc(e.ref.id)})})},remove:function(e,n){var t=e.state,r=e.rootState,i=e.dispatch,o=Y[t.refKey].doc(n).delete(),a=u.map(function(t){var e=r[t][t].filter(function(e){return e[s+"Id"]===n}).map(function(e){return Y[t].doc(e.id).delete()});return Promise.all(e)});return a.push(o),i("saveTransaction",Promise.all(a),{root:!0})}}}},Q.prototype.documentMixin=function(e,t){var n=t.fields,r=t.embeddedIn,i=t.embedsMany,o=t.belongsTo,a=t.hasAndBelongsToMany,s=this,u=e,c=x(u),d=r,l=[];if(i)for(var f in i)i.hasOwnProperty(f)&&(l.push(f),this.registerModel(f,i[f]));var m=[];if(o)for(var h in o)o.hasOwnProperty(h)&&(m.push(h),this.registerModel(h,o[h]));var p=[];if(a)for(var v in a)a.hasOwnProperty(v)&&(p.push(v),this.registerModel(v,a[v]));var $={props:{store:{type:Object,required:!0},id:{type:String,required:!0},docRef:{type:Object,required:!0}},data:function(){return{parentPropName:d,collectionName:c}},computed:{$_documentMixin_docState:function(){var t=this;return this.$_documentMixin_moduleFullState[this.collectionName].find(function(e){return e.id===t.id})||{}},$_documentMixin_moduleFullState:function(){return this.store.state[this.$_documentMixin_moduleName]},$_documentMixin_moduleName:function(){return this.parentPropName?this.collectionName+"-"+this[this.parentPropName].id:this.collectionName}},methods:{update:function(e){e.id=this.id,this.store.dispatch(this.$_documentMixin_moduleAccessorName("update"),e)},destroy:function(){var t=this,e=l.map(function(e){return t.$_documentMixin_get(e,{setRef:!0}).then(function(e){return Promise.all(e.map(function(e){return e.destroy()}))})});return e.push(this.store.dispatch(this.$_documentMixin_moduleAccessorName("remove"),this.id)),Promise.all(e).then(function(){return t.$_documentMixin_unregisterDynamicModules(l)})},$_documentMixin_get:function(e,t){var n=this;void 0===t&&(t={});var r=this.$_documentMixin_submoduleAccessorName(e,"get"),i=s.lookupModel(e);return this.$_documentMixin_registerDynamicModule(e,this.docRef.collection(e),t),this.store.dispatch(r).then(function(e){return e.map(function(e){var t={propsData:{store:n.store,id:e.id,docRef:e}};return t.propsData[u]=n,new i(t)})})},$_documentMixin_findOrCreateModule:function(e){return H[e]=H[e]||s.vuexModule({name:e}),H[e]},$_documentMixin_registerDynamicModule:function(e,t,n){void 0===n&&(n={}),J[this.$_documentMixin_submoduleName(e)]||(J[this.$_documentMixin_submoduleName(e)]=!0,this.store.registerModule(this.$_documentMixin_submoduleName(e),this.$_documentMixin_findOrCreateModule(e)),!1!==n.setRef&&this.store.dispatch(this.$_documentMixin_submoduleAccessorName(e,"setRef"),{ref:t,parentDocId:this.id}))},$_documentMixin_unregisterDynamicModules:function(e){var t=this;return Promise.all(e.map(function(e){return t.store.dispatch(t.$_documentMixin_submoduleAccessorName(e,"unsetRef")).then(function(){t.store.unregisterModule(t.$_documentMixin_submoduleName(e)),delete J[t.$_documentMixin_submoduleName(e)]})}))},$_documentMixin_moduleAccessorName:function(e){return this.$_documentMixin_moduleName+"/"+e},$_documentMixin_submoduleName:function(e){return e+"-"+this.id},$_documentMixin_submoduleAccessorName:function(e,t){return this.$_documentMixin_submoduleName(e)+"/"+t},$_documentMixin_submoduleCollectionState:function(e){return this.$_documentMixin_submoduleFullState(e)[e]||[]},$_documentMixin_submoduleFullState:function(e){return this.store.state[this.$_documentMixin_submoduleName(e)]||{}}}};return d&&($.props[d]={type:Object,required:!0}),n.forEach(function(e){$.computed[e]=function(){return this.$_documentMixin_docState[e]}}),l.forEach(function(i){var o=s.lookupModel(i);$.computed[i]=function(){var n=this,r=this.docRef.collection(i);this.$_documentMixin_registerDynamicModule(i,r);var e=this.$_documentMixin_submoduleCollectionState(i).map(function(e){var t={propsData:{store:n.store,id:e.id,docRef:r.doc(e.id)}};return t.propsData[u]=n,new o(t)});return e.create=function(e){var t=n.$_documentMixin_submoduleAccessorName(i,"add");return n.store.dispatch(t,e)},e}}),m.forEach(function(r){var i=s.lookupModel(r);$.computed[r]=function(){var e=this.docRef.firestore.collection(r),t=this.$_documentMixin_docState[r+"Id"],n={propsData:{store:this.store,id:t,docRef:e.doc(t)}};return new i(n)}}),p.forEach(function(o){var n=[c,o].sort().join("_"),a=s.lookupModel(o);$.computed[o]=function(){var r=this,i=this.docRef.firestore.collection(o);return this.store.state[n][n].filter(function(e){return e[c+"Id"]===r.id}).map(function(e){var t=e[o+"Id"],n={propsData:{store:r.store,id:t,docRef:i.doc(t)}};return n.propsData[u]=r,new a(n)})};var e=x.singular(o);e=function(e,t){t=Object.assign({pascalCase:!1},t);var n=function(e){return t.pascalCase?e.charAt(0).toUpperCase()+e.slice(1):e};return 0===(e=Array.isArray(e)?e.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():/^[a-z\d]+$/.test(e)?n(e):(e!==e.toLowerCase()&&(e=function(e){for(var t=!1,n=!1,r=!1,i=0;i<e.length;i++){var o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,i)+"-"+e.slice(i),r=n,n=!(t=!1),i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,i-1)+"-"+e.slice(i-1),r=n,t=!(n=!1)):(t=o.toLowerCase()===o,r=n,n=o.toUpperCase()===o)}return e}(e)),n(e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()})))}(e,{pascalCase:!0}),$.methods["add"+e]=function(e){var t={};return t.id=c<=o?this.id+"_"+e:e+"_"+this.id,!!this.store.state[n][n].find(function(e){return e.id===t.id})?Promise.resolve(null):(t[c+"Id"]=this.id,t[o+"Id"]=e,this.store.dispatch(n+"/addWithId",t))}}),$},Q.prototype.documentClassMethods=function(e){var n=e.store,t=e.db,r=e.klass,i=e.collectionName,o=e.joinsWith,a=i;H[i]=this.vuexModule({name:i,joinsWith:o}),n.registerModule(a,H[i]),r.setCollectionRef=function(){var e=t.collection(i);return n.dispatch(i+"/setRef",{ref:e,parentDocId:null}),e},r.all=function(){var t=this;return n.state[a][i].map(function(e){return new r({propsData:{store:n,id:e.id,docRef:t[i+"Ref"].doc(e.id)}})})},r.create=function(e){n.dispatch(a+"/add",e)}},Q.firebaseMutations=t,Q});